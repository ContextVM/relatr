# Relatr Environment Configuration
# Copy this file to .env and customize with your values

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Server's Nostr private key (hex format, 64 characters)
# Generate with: openssl rand -hex 32
SERVER_SECRET_KEY=your_server_private_key_here

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Default perspective pubkey for trust calculations (hex format)
# Default: Gigi's pubkey (6e468422dfb74a5738702a8823b9b28168abab8655faacb6853cd0ee15deee93)
DEFAULT_SOURCE_PUBKEY=6e468422dfb74a5738702a8823b9b28168abab8655faacb6853cd0ee15deee93

# Nostr relays for fetching social graph data (comma-separated)
# Default: wss://relay.damus.io,wss://relay.nostr.band,wss://relay.snort.social
NOSTR_RELAYS=wss://relay.damus.io,wss://relay.nostr.band,wss://relay.snort.social

# Nostr relays for MCP transport
# Default: wss://relay.contextvm.org
SERVER_RELAYS=wss://relay.contextvm.org

# =============================================================================
# OPTIONAL FEATURES
# =============================================================================

# Enable Trusted Assertions (TA) publishing (NIP-85 kind 30382).
# When enabled, Relatr can act as a Trusted Assertion provider and expose TA tools.
# Default: false
TA_ENABLED=false

# =============================================================================
# TA (TRUSTED ASSERTIONS) CONFIGURATION
# =============================================================================

# Extra relays for TA event publishing (comma-separated)
# These relays are added to the final list where TA events are published
# alongside user relays and server relays
# Default: (empty)
TA_EXTRA_RELAYS=

# =============================================================================
# MCP SERVER CONFIGURATION
# =============================================================================

# Whether the MCP server is public (accessible to anyone) or private
# Default: false
IS_PUBLIC_SERVER=false

# Server name displayed in MCP server info
# Default: Relatr
SERVER_NAME=Relatr

# Server description/about text
# Default: Relatr is a social graph analysis and trust score service for Nostr.
SERVER_ABOUT=Relatr is a social graph analysis and trust score service for Nostr.

# Server website URL
# Default: https://relatr.xyz
SERVER_WEBSITE=https://relatr.xyz

# Server picture/avatar URL
# Default: https://image.nostr.build/30d7fdef1b3d3b83d9e33f47b7d15388deeb47428041f0656612d1450cdb1216.jpg
SERVER_PICTURE=https://image.nostr.build/30d7fdef1b3d3b83d9e33f47b7d15388deeb47428041f0656612d1450cdb1216.jpg

# =============================================================================
# RATE LIMITING
# =============================================================================

# Maximum tokens for rate limiter (burst capacity)
# Default: 25
RATE_LIMIT_TOKENS=25

# Tokens per second to refill
# Default: 2
RATE_LIMIT_REFILL_RATE=2

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Alpha parameter in distance formula (0.0 - 1.0)
# Lower values = distance matters more
# Default: 0.1
DECAY_FACTOR=0.1

# Social graph traversal depth (1-4 recommended)
# Higher values = more comprehensive but slower
# Default: 1
NUMBER_OF_HOPS=1

# Cache time-to-live in hours
# Default: 168 (1 week)
CACHE_TTL_HOURS=168

# Sync interval in hours
# Default: 21
SYNC_INTERVAL_HOURS=21

# Cleanup interval in hours
# Default: 7
CLEANUP_INTERVAL_HOURS=7

# Validation sync interval in hours
# Default: 3
VALIDATION_SYNC_INTERVAL_HOURS=3

# =============================================================================
# RELAY CAPPING
# =============================================================================

# Maximum relays to store per user in pubkey_kv table
# Reduces storage pressure for users with 100+ relays
# Default: 15
MAX_STORED_RELAYS=15

# Maximum relays to publish TA events to
# Reduces network congestion when publishing to many relays
# Default: 15
MAX_PUBLISH_RELAYS=15

# =============================================================================
# DATA PATHS
# =============================================================================

# Path to social graph binary file
# Default: ./data/socialGraph.bin
GRAPH_BINARY_PATH=./data/socialGraph.bin

# SQLite database path
# Default: ./data/relatr.db
DATABASE_PATH=./data/relatr.db

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# User and group IDs for file permissions (typically your host user)
# Get with: id -u and id -g
UID=1000
GID=1000